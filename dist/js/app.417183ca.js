(function(){var e={6700:function(e,t,s){var a={"./af":2786,"./af.js":2786,"./ar":867,"./ar-dz":4130,"./ar-dz.js":4130,"./ar-kw":6135,"./ar-kw.js":6135,"./ar-ly":6440,"./ar-ly.js":6440,"./ar-ma":7702,"./ar-ma.js":7702,"./ar-sa":6040,"./ar-sa.js":6040,"./ar-tn":7100,"./ar-tn.js":7100,"./ar.js":867,"./az":1083,"./az.js":1083,"./be":9808,"./be.js":9808,"./bg":8338,"./bg.js":8338,"./bm":7438,"./bm.js":7438,"./bn":8905,"./bn-bd":6225,"./bn-bd.js":6225,"./bn.js":8905,"./bo":1560,"./bo.js":1560,"./br":1278,"./br.js":1278,"./bs":622,"./bs.js":622,"./ca":2468,"./ca.js":2468,"./cs":5822,"./cs.js":5822,"./cv":877,"./cv.js":877,"./cy":7373,"./cy.js":7373,"./da":4780,"./da.js":4780,"./de":9740,"./de-at":217,"./de-at.js":217,"./de-ch":894,"./de-ch.js":894,"./de.js":9740,"./dv":5300,"./dv.js":5300,"./el":837,"./el.js":837,"./en-au":8348,"./en-au.js":8348,"./en-ca":7925,"./en-ca.js":7925,"./en-gb":2243,"./en-gb.js":2243,"./en-ie":6436,"./en-ie.js":6436,"./en-il":7207,"./en-il.js":7207,"./en-in":4175,"./en-in.js":4175,"./en-nz":6319,"./en-nz.js":6319,"./en-sg":1662,"./en-sg.js":1662,"./eo":2915,"./eo.js":2915,"./es":5655,"./es-do":5251,"./es-do.js":5251,"./es-mx":6112,"./es-mx.js":6112,"./es-us":1146,"./es-us.js":1146,"./es.js":5655,"./et":5603,"./et.js":5603,"./eu":7763,"./eu.js":7763,"./fa":6959,"./fa.js":6959,"./fi":1897,"./fi.js":1897,"./fil":2549,"./fil.js":2549,"./fo":4694,"./fo.js":4694,"./fr":4470,"./fr-ca":3049,"./fr-ca.js":3049,"./fr-ch":2330,"./fr-ch.js":2330,"./fr.js":4470,"./fy":5044,"./fy.js":5044,"./ga":9295,"./ga.js":9295,"./gd":2101,"./gd.js":2101,"./gl":8794,"./gl.js":8794,"./gom-deva":7884,"./gom-deva.js":7884,"./gom-latn":3168,"./gom-latn.js":3168,"./gu":5349,"./gu.js":5349,"./he":4206,"./he.js":4206,"./hi":94,"./hi.js":94,"./hr":316,"./hr.js":316,"./hu":2138,"./hu.js":2138,"./hy-am":1423,"./hy-am.js":1423,"./id":9218,"./id.js":9218,"./is":135,"./is.js":135,"./it":626,"./it-ch":150,"./it-ch.js":150,"./it.js":626,"./ja":9183,"./ja.js":9183,"./jv":4286,"./jv.js":4286,"./ka":2105,"./ka.js":2105,"./kk":7772,"./kk.js":7772,"./km":8758,"./km.js":8758,"./kn":9282,"./kn.js":9282,"./ko":3730,"./ko.js":3730,"./ku":1408,"./ku.js":1408,"./ky":3291,"./ky.js":3291,"./lb":6841,"./lb.js":6841,"./lo":5466,"./lo.js":5466,"./lt":7010,"./lt.js":7010,"./lv":7595,"./lv.js":7595,"./me":9861,"./me.js":9861,"./mi":5493,"./mi.js":5493,"./mk":5966,"./mk.js":5966,"./ml":7341,"./ml.js":7341,"./mn":5115,"./mn.js":5115,"./mr":370,"./mr.js":370,"./ms":9847,"./ms-my":1237,"./ms-my.js":1237,"./ms.js":9847,"./mt":2126,"./mt.js":2126,"./my":6165,"./my.js":6165,"./nb":4924,"./nb.js":4924,"./ne":6744,"./ne.js":6744,"./nl":3901,"./nl-be":9814,"./nl-be.js":9814,"./nl.js":3901,"./nn":3877,"./nn.js":3877,"./oc-lnc":2135,"./oc-lnc.js":2135,"./pa-in":5858,"./pa-in.js":5858,"./pl":4495,"./pl.js":4495,"./pt":9520,"./pt-br":7971,"./pt-br.js":7971,"./pt.js":9520,"./ro":6459,"./ro.js":6459,"./ru":238,"./ru.js":238,"./sd":950,"./sd.js":950,"./se":490,"./se.js":490,"./si":124,"./si.js":124,"./sk":4249,"./sk.js":4249,"./sl":4985,"./sl.js":4985,"./sq":1104,"./sq.js":1104,"./sr":8227,"./sr-cyrl":9915,"./sr-cyrl.js":9915,"./sr.js":8227,"./ss":5893,"./ss.js":5893,"./sv":8760,"./sv.js":8760,"./sw":1172,"./sw.js":1172,"./ta":7333,"./ta.js":7333,"./te":3110,"./te.js":3110,"./tet":2095,"./tet.js":2095,"./tg":7321,"./tg.js":7321,"./th":9041,"./th.js":9041,"./tk":9005,"./tk.js":9005,"./tl-ph":5768,"./tl-ph.js":5768,"./tlh":9444,"./tlh.js":9444,"./tr":2397,"./tr.js":2397,"./tzl":8254,"./tzl.js":8254,"./tzm":1106,"./tzm-latn":699,"./tzm-latn.js":699,"./tzm.js":1106,"./ug-cn":9288,"./ug-cn.js":9288,"./uk":7691,"./uk.js":7691,"./ur":3795,"./ur.js":3795,"./uz":6791,"./uz-latn":588,"./uz-latn.js":588,"./uz.js":6791,"./vi":5666,"./vi.js":5666,"./x-pseudo":4378,"./x-pseudo.js":4378,"./yo":5805,"./yo.js":5805,"./zh-cn":3839,"./zh-cn.js":3839,"./zh-hk":5726,"./zh-hk.js":5726,"./zh-mo":9807,"./zh-mo.js":9807,"./zh-tw":4152,"./zh-tw.js":4152};function n(e){var t=i(e);return s(t)}function i(e){if(!s.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}n.keys=function(){return Object.keys(a)},n.resolve=i,e.exports=n,n.id=6700},8007:function(e,t,s){"use strict";var a=s(144),n=function(){var e=this,t=e._self._c;return t("div",[t("main-wrapper")],1)},i=[],l=function(){var e=this,t=e._self._c;return t("div",[t("router-view")],1)},r=[],o={},c=o,d=s(1001),u=(0,d.Z)(c,l,r,!1,null,null,null),m=u.exports,p={components:{MainWrapper:m}},h=p,f=(0,d.Z)(h,n,i,!1,null,null,null),g=f.exports,v=s(8345),j=s(998),w=s(6232),k=s(5550),b=s(3423),_=s(6190),Z=s(266),x=s(2118),F=s(4324),y=s(3059),C=s(5554),I=s(5372),S=s(9422),z=s(1713),$=s(7423),D=s(9258),T=s(3687),R=s(7953),V=function(){var e=this,t=e._self._c;return t(j.Z,{attrs:{id:"inspire"}},[t("dialog-rename",{attrs:{dialogString:e.dialogString},on:{SaveName:function(t){return e.renameFile(t)}},model:{value:e.dialogRename,callback:function(t){e.dialogRename=t},expression:"dialogRename"}}),t("dialog-new-folder",{attrs:{dialogString:e.dialogString},on:{SaveFolder:function(t){return e.createFolder(t)}},model:{value:e.dialogNewFolder,callback:function(t){e.dialogNewFolder=t},expression:"dialogNewFolder"}}),t(D.Z,{attrs:{top:"",timeout:2e3},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v(" "+e._s(e.snackbarMessage)+" "),[t(_.Z,{attrs:{color:"blue",text:""},on:{click:function(t){e.snackbar=!1}}},[e._v(" Close ")])]],2),e.screenWidth<700?t(C.Z,{attrs:{app:""},model:{value:e.leftDrawer,callback:function(t){e.leftDrawer=t},expression:"leftDrawer"}},[t(x.Z,[t("text-field",{staticClass:"mt-3",on:{changeFilter:function(t){e.filter=t}}}),t("select-items",{staticClass:"my-3",on:{changeCurrentView:function(t){e.currentView=t}}}),t("menu-container",{attrs:{currentFolder:e.currentFolder,allSize:e.getSizeItem(e.allSize)},on:{uploadFile:function(t){return e.cloudItems.push(t)},errorUploadFile:function(t){return e.openSnackbar(t)},createFolder:e.createFolderDialog}})],1)],1):e._e(),t(w.Z,{attrs:{app:"",color:"white",flat:""}},[e.screenWidth<700?t("div",[t("div",{staticClass:"d-flex align-center"},[t(k.Z,{on:{click:function(t){e.leftDrawer=!e.leftDrawer}}}),t(R.qW,[e._v("Application")])],1)]):t(x.Z,{staticClass:"py-0 fill-height"},[t(b.Z,{staticClass:"mr-10",attrs:{color:"#1976D2",size:"32"}},[t(F.Z,{attrs:{dark:""}},[e._v(" mdi-account-circle ")])],1),t(R.qW,[e._v("Application")]),t(T.Z),t(S.Z,{attrs:{"max-width":"220"}},[t("text-field",{on:{changeFilter:function(t){e.filter=t}}})],1),t(S.Z,{attrs:{"max-width":"160"}},[t("select-items",{on:{changeCurrentView:function(t){e.currentView=t}}})],1)],1)],1),t(y.Z,{staticClass:"grey lighten-3"},[t(x.Z,[t(z.Z,[e.screenWidth>700?t(Z.Z,{attrs:{cols:"3"}},[t($.Z,{attrs:{rounded:"lg"}},[t("menu-container",{attrs:{currentFolder:e.currentFolder,allSize:e.getSizeItem(e.allSize)},on:{uploadFile:function(t){return e.cloudItems.push(t)},errorUploadFile:function(t){return e.openSnackbar(t)},createFolder:e.createFolderDialog}})],1)],1):e._e(),t(Z.Z,[t($.Z,{attrs:{rounded:"lg"}},[t("div",{staticClass:"ml-3 pt-2"},[t("span",{staticClass:"underline-text",on:{click:function(t){e.currentFolder=-1}}},[e._v(" Главная / ")]),t("span",[e._v(" "+e._s(e.folders.find((t=>t.id===e.currentFolder))?.name)+" ")])]),e._v(" "+e._s(e.filter)+" "),-1===e.currentFolder?t("folder-items",{attrs:{paginatedItems:e.folders,getSizeItem:e.getSizeItem},on:{changeCurrentFolder:function(t){return e.changeFolder(t)}}}):e._e(),"Сетка"===e.currentView?t("grid-items",{attrs:{paginatedItems:e.paginatedItems},on:{downloadItem:function(t){return e.downloadItem(t)},renameItem:function(t){return e.renameDialog(t)},deleteItem:function(t){return e.deleteItem(t)}}}):t("table-items",{attrs:{paginatedItems:e.paginatedItems,getSizeItem:e.getSizeItem},on:{downloadItem:function(t){return e.downloadItem(t)},renameItem:function(t){return e.renameDialog(t)},deleteItem:function(t){return e.deleteItem(t)}}}),e.cloudItems.length>0?t("div",{staticClass:"text-left mt-10 pl-3"},[t("span",{staticClass:"blue-text"},[e._v(" "+e._s("Объём папки "+e.getCurrentSize())+" ")])]):e._e(),t("div",{staticClass:"text-center mt-10 pb-5"},[e.changePaginationLength>1?t(I.Z,{attrs:{length:e.changePaginationLength},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}}):e._e()],1)],1)],1)],1)],1)],1)],1)},O=[],M=function(){var e=this,t=e._self._c;return t("div",[e.paginatedItems.length?t("div",{staticClass:"teble-top"},e._l(e.paginatedItems,(function(s,a){return t("div",{key:a},[t("div",{staticClass:"py-3 row-item"},[t("div",{staticClass:"row-start"},[t("div",{staticClass:"row-icon"},[t(F.Z,{attrs:{size:"32"}},[e._v(" mdi-file ")])],1),t("div",{staticClass:"row-info"},[t("div",{staticClass:"row-name"},[e._v(" "+e._s(s.full_name)+" ")]),t("div",{staticClass:"row-size"},[e._v(" "+e._s(e.getSizeItem(s.size))+" ")])])]),t("div",{staticClass:"row-end"},[t("div",{staticClass:"row-date"},[e._v(" "+e._s(e.$moment(s.created_at).format("D.M.YYYY, H:MM"))+" ")]),t("div",{staticClass:"row-btn"},[t(_.Z,{attrs:{icon:""},on:{click:function(t){return e.$emit("downloadItem",s.id)}}},[t(F.Z,{attrs:{size:"18"}},[e._v("mdi-download")])],1),t(_.Z,{attrs:{icon:""},on:{click:function(t){return e.$emit("renameItem",s.id)}}},[t(F.Z,{attrs:{size:"18"}},[e._v("mdi-lead-pencil")])],1),t(_.Z,{attrs:{icon:""},on:{click:function(t){return e.$emit("deleteItem",s.id)}}},[t(F.Z,{attrs:{size:"18"}},[e._v("mdi-delete")])],1)],1)])])])})),0):t("div",[t("div",{staticClass:"pt-10",attrs:{align:"center"}},[e._v(" Файлов пока нет ")]),t("div",{attrs:{align:"center"}},[t(F.Z,{attrs:{size:"32"}},[e._v("mdi-halloween")])],1)])])},L=[],P={name:"TableItems",props:{paginatedItems:Array,getSizeItem:Function},methods:{}},U=P,N=(0,d.Z)(U,M,L,!1,null,"d56177f2",null),E=N.exports,q=s(9582),B=s(4886),W=function(){var e=this,t=e._self._c;return t("div",[e.paginatedItems.length?t("div",[t("div",{staticClass:"grid pt-5 px-5"},e._l(e.paginatedItems,(function(s,a){return t("div",{key:a},[t(q.Z,{attrs:{height:"110",align:"center"}},[t(F.Z,{staticClass:"mt-5",attrs:{size:"32"}},[e._v(" mdi-file ")]),t(z.Z,{staticClass:"ma-1",attrs:{align:"center",justify:"space-between"}},[t("div",{staticClass:"hidden"},[t(B.EB,{staticClass:"pa-1 text-caption justify-center",domProps:{textContent:e._s(s.full_name)}})],1)]),t(_.Z,{attrs:{icon:""},on:{click:function(t){return e.$emit("downloadItem",s.id)}}},[t(F.Z,{attrs:{size:"18"}},[e._v("mdi-download")])],1),t(_.Z,{attrs:{icon:""},on:{click:function(t){return e.$emit("renameItem",s.id)}}},[t(F.Z,{attrs:{size:"18"}},[e._v("mdi-lead-pencil")])],1),t(_.Z,{attrs:{icon:""},on:{click:function(t){return e.$emit("deleteItem",s.id)}}},[t(F.Z,{attrs:{size:"18"}},[e._v("mdi-delete")])],1)],1)],1)})),0)]):t("div",[t("div",{staticClass:"pt-10",attrs:{align:"center"}},[e._v(" Файлов пока нет ")]),t("div",{attrs:{align:"center"}},[t(F.Z,{attrs:{size:"32"}},[e._v("mdi-halloween")])],1)])])},A=[],Y={name:"GridItems",props:{paginatedItems:Array}},G=Y,H=(0,d.Z)(G,W,A,!1,null,"6af0caa2",null),J=H.exports,K=s(8383),Q=function(){var e=this,t=e._self._c;return t(K.Z,{attrs:{items:e.viewItems.map((e=>e.value)),"menu-props":"auto",label:"Select","hide-details":"","prepend-icon":e.viewItems.find((t=>t.value===e.currentSelectView)).icon,"single-line":""},on:{change:function(t){return e.setcurrentView()}},model:{value:e.currentSelectView,callback:function(t){e.currentSelectView=t},expression:"currentSelectView"}})},X=[],ee={name:"SelectItems",emits:{changeCurrentView:null},data:()=>({currentSelectView:"Сетка",viewItems:[{value:"Сетка",icon:"mdi-view-grid"},{value:"Список",icon:"mdi-format-list-bulleted"}]}),methods:{setcurrentView(){localStorage.setItem("currentSelect",this.currentSelectView),this.$emit("changeCurrentView",this.currentSelectView)}},mounted(){localStorage.getItem("currentSelect")?this.currentSelectView=localStorage.getItem("currentSelect"):this.currentSelectView="Сетка",this.$emit("changeCurrentView",this.currentSelectView)}},te=ee,se=(0,d.Z)(te,Q,X,!1,null,"49454310",null),ae=se.exports,ne=s(9780),ie=function(){var e=this,t=e._self._c;return t(ne.Z,{staticClass:"mr-8",attrs:{clearable:"","prepend-icon":"mdi-magnify",placeholder:"Найти",dense:"",flat:"","hide-details":"",rounded:"","solo-inverted":""},on:{input:function(t){return e.$emit("changeFilter",e.filter)}},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})},le=[],re={name:"TextField",data:()=>({filter:""}),emits:{changeFilter:null}},oe=re,ce=(0,d.Z)(oe,ie,le,!1,null,"867f777c",null),de=ce.exports,ue=s(9223),me=s(5808),pe=s(4525),he=s(6435),fe=function(){var e=this,t=e._self._c;return t(me.Z,{attrs:{color:"transparent"}},[t("div",{staticClass:"pt-6 load-field-block",attrs:{align:"left"}},[t(F.Z,{staticClass:"pl-5",attrs:{left:""}},[e._v(" mdi-cloud-upload ")]),t(_.Z,{staticClass:"mr-8 load-field text-none",attrs:{color:"primary",dense:"","hide-details":"",rounded:"","solo-inverted":"",loading:e.isSelecting},on:{click:e.selectFile}},[e._v(" Загрузить ")]),t("input",{ref:"uploader",staticClass:"d-none",attrs:{type:"file"},on:{change:e.onFileChanged}})],1),t("div",{staticClass:"pt-5 load-field-block",attrs:{align:"left"}},[t(F.Z,{staticClass:"pl-5",attrs:{left:""}},[e._v(" mdi-folder-multiple-plus ")]),t(_.Z,{staticClass:"mr-8 load-field text-none",attrs:{outlined:"",color:"primary",dense:"",rounded:"","solo-inverted":"",disabled:!(-1===e.currentFolder)},on:{click:function(t){return e.createFolder()}}},[e._v(" Новая папка ")])],1),t(pe.Z,{staticClass:"big-padding"},[t(he.km,[t(he.V9,[t("span",{staticClass:"blue-text-main"},[e._v(" "+e._s("На диске "+e.allSize)+" ")])])],1)],1),t(ue.Z,{staticClass:"my-2"}),t(pe.Z,[t(he.km,[t(_.Z,{attrs:{outlined:"",color:"error"},on:{click:e.logout}},[e._v(" Выйти ")])],1)],1)],1)},ge=[],ve=s(9669),je=s.n(ve);const we=je().create({baseURL:"http://markwebdev.ru/api/v1/",headers:{authorization:`Bearer ${localStorage.getItem("token")}`}});var ke=we,be={name:"MenuContainer",data:()=>({selectedFile:null,isSelecting:!1}),props:{currentFolder:Number,allSize:String},methods:{async logout(){await ke.post("auth/logout").then((()=>{this.$router.push("/")})).catch((e=>{console.log(e)}))},createFolder(){this.$emit("createFolder")},selectFile(){this.isSelecting=!0,window.addEventListener("focus",(()=>{this.isSelecting=!1}),{once:!0}),this.$refs.uploader.click()},onFileChanged(e){this.selectedFile=e.target.files[0],this.uploadFile()},async uploadFile(){if("php"===this.selectedFile.name.split(".").pop()||this.selectedFile.size>20971520)this.$emit("errorUploadFile","Нельзя загружать файлы .php или файлы весом боьше 20Мб");else{const e=new FormData;e.append("file",this.selectedFile),-1===this.currentFolder?await ke.post("files",e).then((e=>{this.$emit("uploadFile",e.data.data)})).catch((e=>{console.log(e),this.$emit("errorUploadFile","Не удалось выбрать файл")})):await ke.post(`files?folder_id=${this.currentFolder}`,e).then((e=>{this.$emit("uploadFile",e.data.data)})).catch((e=>{console.log(e),this.$emit("errorUploadFile","Не удалось выбрать файл")}))}}}},_e=be,Ze=(0,d.Z)(_e,fe,ge,!1,null,"23371900",null),xe=Ze.exports,Fe=s(4061),ye=function(){var e=this,t=e._self._c;return t(Fe.Z,{attrs:{"max-width":"80%"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[t(q.Z,[t(B.EB,{staticClass:"text-h5"},[e._v(" Переименовать файл ")]),t(ne.Z,{staticClass:"px-5",attrs:{placeholder:e.dialogString},model:{value:e.inputText,callback:function(t){e.inputText=t},expression:"inputText"}}),t(B.h7,[t("div",{attrs:{align:"center",justify:"start"}},[t(_.Z,{attrs:{small:"",color:"primary"},on:{click:function(t){e.$emit("SaveName",e.inputText),e.inputText=""}}},[e._v(" Сохранить ")]),t(_.Z,{staticClass:"ml-3",attrs:{small:"",color:"primary"},on:{click:function(t){t.stopPropagation(),e.show=!1,e.inputText=""}}},[e._v(" Отмена ")])],1)])],1)],1)},Ce=[],Ie={name:"DialogRename",props:{value:Boolean,dialogString:String},data:()=>({inputText:""}),computed:{show:{get(){return this.value},set(e){this.$emit("input",e)}}}},Se=Ie,ze=(0,d.Z)(Se,ye,Ce,!1,null,"5e335cb7",null),$e=ze.exports,De=function(){var e=this,t=e._self._c;return t(Fe.Z,{attrs:{"max-width":"80%"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[t(q.Z,[t(B.EB,{staticClass:"text-h5"},[e._v(" Новая папка ")]),t(ne.Z,{staticClass:"px-5",attrs:{placeholder:e.dialogString},model:{value:e.inputText,callback:function(t){e.inputText=t},expression:"inputText"}}),t(B.h7,[t("div",{attrs:{align:"center",justify:"start"}},[t(_.Z,{attrs:{small:"",color:"primary"},on:{click:function(t){e.$emit("SaveFolder",e.inputText),e.inputText=""}}},[e._v(" Создать ")]),t(_.Z,{staticClass:"ml-3",attrs:{small:"",color:"primary"},on:{click:function(t){t.stopPropagation(),e.show=!1,e.inputText=""}}},[e._v(" Отмена ")])],1)])],1)],1)},Te=[],Re={name:"DialogNewFolder",props:{value:Boolean,dialogString:String},data:()=>({inputText:""}),computed:{show:{get(){return this.value},set(e){this.$emit("input",e)}}}},Ve=Re,Oe=(0,d.Z)(Ve,De,Te,!1,null,"04e06b38",null),Me=Oe.exports,Le=function(){var e=this,t=e._self._c;return t("div",{staticClass:"grid pt-5 px-5"},e._l(e.paginatedItems,(function(s,a){return t("div",{key:a},[t(q.Z,{attrs:{elevation:"0",height:"90",align:"center"},on:{click:function(t){return e.folderClick(s)}}},[t(F.Z,{staticClass:"mt-1",attrs:{color:"primary",size:"32"}},[e._v(" mdi-folder ")]),t(z.Z,{staticClass:"ma-1",attrs:{align:"center",justify:"space-between"}},[t("div",{staticClass:"hidden"},[t(B.EB,{staticClass:"pa-1 text-caption folder-name justify-center",domProps:{textContent:e._s(s.name)}})],1),t("div",{staticClass:"hidden"},[t(B.EB,{staticClass:"pa-1 text-caption justify-center"},[e._v(e._s(e.getSizeItem(s.size)))])],1)])],1)],1)})),0)},Pe=[],Ue={name:"FolderItems",props:{paginatedItems:Array,getSizeItem:Function},methods:{folderClick(e){e.full_name||this.$emit("changeCurrentFolder",e.id)}}},Ne=Ue,Ee=(0,d.Z)(Ne,Le,Pe,!1,null,"cc51e2f6",null),qe=Ee.exports,Be={name:"HomePage",components:{DialogNewFolder:Me,DialogRename:$e,MenuContainer:xe,TextField:de,SelectItems:ae,GridItems:J,FolderItems:qe,TableItems:E},data:()=>({fullSize:[0,0],currentFolder:-1,folders:[],dialogString:"",dialogTitle:"",dialogNewFolder:!1,dialogRename:!1,renameField:{id:null,name:null},snackbarMessage:"",snackbar:!1,leftDrawer:null,screenWidth:null,filter:"",page:1,cloudItems:[],currentView:"Сетка",allSize:0}),computed:{startIndex(){return 10*(this.page-1)},endIndex(){return 10*this.page},filteredItems(){return this.cloudItems.filter((e=>e.full_name.toUpperCase().includes(this.filter?.toUpperCase())))},paginatedItems(){return this.filteredItems.slice(this.startIndex,this.endIndex)},changePaginationLength(){return Math.ceil(this.filteredItems.length/10)}},watch:{filter(){this.page=1},currentFolder(){this.getFiles(),this.getFolders()},cloudItems(){this.gelAllSizeMainFiles()}},methods:{async gelAllSizeMainFiles(){await ke.get("files").then((e=>{this.allSize=e.data.data.reduce(((e,t)=>e+t.size),0)})).catch((e=>{console.log(e)}))},changeFolder(e){this.currentFolder=e},createFolderDialog(){this.dialogString="Новая папка",this.dialogNewFolder=!0},async createFolder(e){this.dialogNewFolder=!1,await ke.post(`folders?name=${e}`).then((e=>{this.folders.push(e.data.data)})).catch((e=>{this.openSnackbar(e.response.data.message)}))},getSizeItem(e){return e>1048576?Math.round(e/1048576)+" МБ":e>1024?Math.round(e/1024)+" КБ":e+" байт"},getCurrentSize(){let e=this.cloudItems.reduce(((e,t)=>e+t.size),0);return this.getSizeItem(e)},openSnackbar(e){this.snackbarMessage=e,this.snackbar=!0},async renameFile(e){this.dialogRename=!1,this.renameField.name=e,console.log(this.renameField.id),await ke.patch(`files/${this.renameField.id}`,{name:this.renameField.name}).then((()=>{this.cloudItems.find((e=>e.id===this.renameField.id)).name=this.renameField.name})).catch((e=>{console.log(e)}))},renameDialog(e){this.dialogString=this.cloudItems.find((t=>t.id===e)).name,this.dialogRename=!0,this.renameField={id:e,name:this.cloudItems.find((t=>t.id===e)).name}},async deleteItem(e){await ke["delete"](`files/${e}`).then((()=>{this.cloudItems=this.cloudItems.filter((t=>t.id!==e))})).catch((e=>{console.log(e)}))},async downloadItem(e){const t=this.cloudItems.find((t=>t.id===e)).full_name;await ke.get(`files/${e}/download`,{responseType:"blob"}).then((e=>{const s=new Blob([e.data],{type:`${t.split(".").pop()}`}),a=document.createElement("a");a.href=URL.createObjectURL(s),a.download=t,a.click(),URL.revokeObjectURL(a.href)})).catch((e=>{console.log(e)}))},async getFiles(){await ke.get(`files?folder_id=${this.currentFolder}`).then((e=>{this.cloudItems=e.data.data})).catch((e=>{console.log(e)}))},async getFolders(){await ke.get("folders").then((e=>{this.folders=e.data.data})).catch((e=>{console.log(e)}))},onResize(){this.screenWidth=window.innerWidth},checkLogin(){""===localStorage.getItem("token")&&this.$router.push("/")}},mounted(){this.screenWidth=window.screen.width,this.$nextTick((()=>{window.addEventListener("resize",this.onResize)})),this.getFiles(),this.getFolders(),this.checkLogin()},beforeDestroy(){window.removeEventListener("resize",this.onResize)}},We=Be,Ae=(0,d.Z)(We,V,O,!1,null,null,null),Ye=Ae.exports,Ge=function(){var e=this,t=e._self._c;return t(j.Z,{attrs:{id:"inspire"}},[t(D.Z,{attrs:{top:"",timeout:2e3},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v(" Неправильно введён пароль или email "),[t(_.Z,{attrs:{color:"blue",text:""},on:{click:function(t){e.snackbar=!1}}},[e._v(" Close ")])]],2),t(x.Z,{attrs:{"fill-height":"",fluid:""}},[t(z.Z,{attrs:{justify:"space-around",align:"center"}},[t(Z.Z,{attrs:{cols:"12",md:"4"}},[t($.Z,{staticClass:"mx-auto pa-10",attrs:{elevation:"10",rounded:""}},[t(ne.Z,{attrs:{placeholder:"Почтовый адрес",required:"",rules:e.emailRules},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),t(ne.Z,{attrs:{type:"password",placeholder:"Пароль",rules:e.requiredRules},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),t("span",[e._v(" Нет аккаунта? ")]),t("router-link",{attrs:{to:"register"}},[t("span",[e._v(" Зарегистрироваться ")])]),t(_.Z,{staticClass:"mt-4",attrs:{block:"",color:"primary"},on:{click:e.loginClick}},[e._v(" Войти ")])],1)],1)],1)],1)],1)},He=[],Je={name:"LoginPage",data:()=>({snackbar:!1,password:"",token:"",email:"",emailRules:[e=>!!e||"Введите e-mail",e=>/.+@.+/.test(e)||"Введите валидный e-mail"],requiredRules:[e=>!!e||"Введите пароль"]}),methods:{async loginClick(){await ke.post(`auth/login?email=${this.email}&password=${this.password}`).then((e=>{this.token=e.data.data.token,localStorage.setItem("token",e.data.data.token),this.$router.push("home")})).catch((e=>{console.log(e),this.snackbar=!0}))}},mounted(){localStorage.setItem("token","")}},Ke=Je,Qe=(0,d.Z)(Ke,Ge,He,!1,null,"16a7dd36",null),Xe=Qe.exports,et=s(5125),tt=function(){var e=this,t=e._self._c;return t(j.Z,{attrs:{id:"inspire"}},[t(D.Z,{attrs:{top:"",timeout:2e3},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v(" Заполните поля правильно пожалуйста "),[t(_.Z,{attrs:{color:"blue",text:""},on:{click:function(t){e.snackbar=!1}}},[e._v(" Close ")])]],2),t(x.Z,{attrs:{"fill-height":"",fluid:""}},[t(z.Z,{attrs:{justify:"space-around",align:"center"}},[t(Z.Z,{attrs:{cols:"12",md:"4"}},[t(et.Z,{model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[t($.Z,{staticClass:"mx-auto pa-10",attrs:{elevation:"10",rounded:""}},[t(ne.Z,{attrs:{placeholder:"Почтовый адрес",required:"",rules:e.emailRules},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),t(ne.Z,{attrs:{placeholder:"Имя",rules:e.requiredRules},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),t(ne.Z,{attrs:{type:"password",placeholder:"Пароль",rules:e.requiredRules},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),t(ne.Z,{attrs:{type:"password",placeholder:"Повторите пароль",rules:[e.password===e.passwordDouble||"Пароли должны совпадать"]},model:{value:e.passwordDouble,callback:function(t){e.passwordDouble=t},expression:"passwordDouble"}}),t("span",[e._v(" Есть аккаунт? ")]),t("router-link",{attrs:{to:"/"}},[t("span",[e._v(" Войти ")])]),t(_.Z,{staticClass:"mt-4",attrs:{block:"",color:"primary"},on:{click:e.registerClick}},[e._v(" Зарегистрироваться ")])],1)],1)],1)],1)],1)],1)},st=[],at={name:"RegisterBlock",data:()=>({snackbar:!1,valid:!1,name:"",passwordDouble:"",token:"",password:"",email:"",emailRules:[e=>!!e||"Введите e-mail",e=>/.+@.+/.test(e)||"Введите валидный e-mail"],requiredRules:[e=>!!e||"Введите пароль"]}),methods:{async registerClick(){this.valid?await ke.post(`auth/register?email=${this.email}&name=${this.name}&password=${this.password}`).then((e=>{console.log(this.email),console.log(this.password),console.log(e.data),this.$router.push("/")})).catch((e=>{console.log(e)})):this.snackbar=!0}}},nt=at,it=(0,d.Z)(nt,tt,st,!1,null,"0fb25912",null),lt=it.exports,rt=s(2590),ot=s.n(rt);a["default"].use(v.ZP),a["default"].use(ot());let ct=new v.ZP({mode:"history",routes:[{path:"/home",name:"home",component:Ye},{path:"/",name:"login",component:Xe},{path:"/register",name:"register",component:lt}]});var dt=ct,ut=s(1705);a["default"].use(ut.Z);var mt=new ut.Z({});a["default"].config.productionTip=!1,new a["default"]({router:dt,vuetify:mt,render:e=>e(g)}).$mount("#app")}},t={};function s(a){var n=t[a];if(void 0!==n)return n.exports;var i=t[a]={id:a,loaded:!1,exports:{}};return e[a].call(i.exports,i,i.exports,s),i.loaded=!0,i.exports}s.m=e,function(){var e=[];s.O=function(t,a,n,i){if(!a){var l=1/0;for(d=0;d<e.length;d++){a=e[d][0],n=e[d][1],i=e[d][2];for(var r=!0,o=0;o<a.length;o++)(!1&i||l>=i)&&Object.keys(s.O).every((function(e){return s.O[e](a[o])}))?a.splice(o--,1):(r=!1,i<l&&(l=i));if(r){e.splice(d--,1);var c=n();void 0!==c&&(t=c)}}return t}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[a,n,i]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){s.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,a){var n,i,l=a[0],r=a[1],o=a[2],c=0;if(l.some((function(t){return 0!==e[t]}))){for(n in r)s.o(r,n)&&(s.m[n]=r[n]);if(o)var d=o(s)}for(t&&t(a);c<l.length;c++)i=l[c],s.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return s.O(d)},a=self["webpackChunkvuetify_cloud"]=self["webpackChunkvuetify_cloud"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=s.O(void 0,[998],(function(){return s(8007)}));a=s.O(a)})();
//# sourceMappingURL=app.417183ca.js.map